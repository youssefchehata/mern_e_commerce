{"ast":null,"code":"import _regeneratorRuntime from\"/home/youssef/Documents/workSpace/mern_e_commerce/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/youssef/Documents/workSpace/mern_e_commerce/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import*as A from'../constants/userConstant';import*as O from'../constants/orderConstant';export var login=function login(email,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:A.USER_LOGIN_REQUEST});config={headers:{Content_Type:'application/json'}};_context.next=5;return axios.post('/api/users/login',{email:email,password:password},config);case 5:_yield$axios$post=_context.sent;data=_yield$axios$post.data;dispatch({type:A.USER_LOGIN_SUCCESS,payload:data});localStorage.setItem('userInfo',JSON.stringify(data));_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);dispatch({type:A.USER_LOGIN_FAIL,payload:_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message});case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var logout=function logout(){return function(dispatch){localStorage.removeItem('userinfo');dispatch({type:A.USER_LOGOUT});dispatch({type:A.USER_DETAILS_RESET});dispatch({type:O.ORDER_LIST_MY_RESET});dispatch({type:A.USER_LIST_RESET});};};export var register=function register(name,email,password){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,_yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:A.USER_REGISTER_REQUEST});config={headers:{Content_Type:'application/json'}};_context2.next=5;return axios.post('/api/users',{name:name,email:email,password:password},config);case 5:_yield$axios$post2=_context2.sent;data=_yield$axios$post2.data;dispatch({type:A.USER_REGISTER_SUCCESS,payload:data});dispatch({type:A.USER_LOGIN_SUCCESS,payload:data});localStorage.setItem('userInfo',JSON.stringify(data));_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);dispatch({type:A.USER_REGISTER_FAIL,payload:_context2.t0.response&&_context2.t0.response.data.message?_context2.t0.response.data.message:_context2.t0.message});case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[0,12]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var getUserDetails=function getUserDetails(id){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _getState,userInfo,config,_yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;dispatch({type:A.USER_DETAILS_REQUEST});_getState=getState(),userInfo=_getState.userLogin.userInfo;config={headers:{Content_Type:'application/json',Authorization:\"Bearer \".concat(userInfo.token)}};_context3.next=6;return axios.get(\"/api/users/\".concat(id),config);case 6:_yield$axios$get=_context3.sent;data=_yield$axios$get.data;dispatch({type:A.USER_DETAILS_SUCCESS,payload:data});// localStorage.setItem('userInfo',JSON.stringify(data))\n_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);dispatch({type:A.USER_REGISTER_FAIL,payload:_context3.t0.response&&_context3.t0.response.data.message?_context3.t0.response.data.message:_context3.t0.message});case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[0,11]]);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();};export var updateUserProfile=function updateUserProfile(user){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var _getState2,userInfo,config,_yield$axios$put,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;dispatch({type:A.USER_UPDATE_PROFILE_REQUEST});_getState2=getState(),userInfo=_getState2.userLogin.userInfo;config={headers:{Content_Type:'application/json',Authorization:\"Bearer \".concat(userInfo.token)}};_context4.next=6;return axios.put(\"/api/users/profile\",user,config);case 6:_yield$axios$put=_context4.sent;data=_yield$axios$put.data;dispatch({type:A.USER_UPDATE_PROFILE_SUCCESS,payload:data});// localStorage.setItem('userInfo',JSON.stringify(data))\n_context4.next=14;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](0);dispatch({type:A.USER_REGISTER_FAIL,payload:_context4.t0.response&&_context4.t0.response.data.message?_context4.t0.response.data.message:_context4.t0.message});case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[0,11]]);}));return function(_x5,_x6){return _ref4.apply(this,arguments);};}();};export var listUsers=function listUsers(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){var _getState3,userInfo,config,_yield$axios$get2,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;dispatch({type:A.USER_LIST_REQUEST});_getState3=getState(),userInfo=_getState3.userLogin.userInfo;config={headers:{Authorization:\"Bearer \".concat(userInfo.token)}};_context5.next=6;return axios.get(\"/api/users\",config);case 6:_yield$axios$get2=_context5.sent;data=_yield$axios$get2.data;dispatch({type:A.USER_LIST_SUCCESS,payload:data});// localStorage.setItem('userInfo',JSON.stringify(data))\n_context5.next=14;break;case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](0);dispatch({type:A.USER_LIST_FAIL,payload:_context5.t0.response&&_context5.t0.response.data.message?_context5.t0.response.data.message:_context5.t0.message});case 14:case\"end\":return _context5.stop();}}},_callee5,null,[[0,11]]);}));return function(_x7,_x8){return _ref5.apply(this,arguments);};}();};export var deleteUser=function deleteUser(id){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch,getState){var _getState4,userInfo,config;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;dispatch({type:A.USER_DELETE_REQUEST});_getState4=getState(),userInfo=_getState4.userLogin.userInfo;config={headers:{Authorization:\"Bearer \".concat(userInfo.token)}};_context6.next=6;return axios.delete(\"/api/users/\".concat(id),config);case 6:dispatch({type:A.USER_DELETE_SUCCESS});// localStorage.setItem('userInfo',JSON.stringify(data))\n_context6.next=12;break;case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](0);dispatch({type:A.USER_DELETE_FAIL,payload:_context6.t0.response&&_context6.t0.response.data.message?_context6.t0.response.data.message:_context6.t0.message});case 12:case\"end\":return _context6.stop();}}},_callee6,null,[[0,9]]);}));return function(_x9,_x10){return _ref6.apply(this,arguments);};}();};export var updateUser=function updateUser(user){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch,getState){var _getState5,userInfo,config,_yield$axios$put2,data;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;dispatch({type:A.USER_UPDATE_REQUEST});_getState5=getState(),userInfo=_getState5.userLogin.userInfo;config={headers:{Content_Type:'application/json',Authorization:\"Bearer \".concat(userInfo.token)}};_context7.next=6;return axios.put(\"/api/users/\".concat(user._id),user,config);case 6:_yield$axios$put2=_context7.sent;data=_yield$axios$put2.data;dispatch({type:A.USER_UPDATE_SUCCESS});dispatch({type:A.USER_DETAILS_SUCCESS,payload:data});// localStorage.setItem('userInfo',JSON.stringify(data))\n_context7.next=15;break;case 12:_context7.prev=12;_context7.t0=_context7[\"catch\"](0);dispatch({type:A.USER_UPDATE_PROFILE_FAIL,payload:_context7.t0.response&&_context7.t0.response.data.message?_context7.t0.response.data.message:_context7.t0.message});case 15:case\"end\":return _context7.stop();}}},_callee7,null,[[0,12]]);}));return function(_x11,_x12){return _ref7.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/youssef/Documents/workSpace/mern_e_commerce/frontend/src/store/actions/userActions.js"],"names":["axios","A","O","login","email","password","dispatch","type","USER_LOGIN_REQUEST","config","headers","Content_Type","post","data","USER_LOGIN_SUCCESS","payload","localStorage","setItem","JSON","stringify","USER_LOGIN_FAIL","response","message","logout","removeItem","USER_LOGOUT","USER_DETAILS_RESET","ORDER_LIST_MY_RESET","USER_LIST_RESET","register","name","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_REGISTER_FAIL","getUserDetails","id","getState","USER_DETAILS_REQUEST","userInfo","userLogin","Authorization","token","get","USER_DETAILS_SUCCESS","updateUserProfile","user","USER_UPDATE_PROFILE_REQUEST","put","USER_UPDATE_PROFILE_SUCCESS","listUsers","USER_LIST_REQUEST","USER_LIST_SUCCESS","USER_LIST_FAIL","deleteUser","USER_DELETE_REQUEST","delete","USER_DELETE_SUCCESS","USER_DELETE_FAIL","updateUser","USER_UPDATE_REQUEST","_id","USER_UPDATE_SUCCESS","USER_UPDATE_PROFILE_FAIL"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport * as A from '../constants/userConstant';\nimport * as O from '../constants/orderConstant';\n\nexport const login = (email, password) => async (dispatch) => {\n  try {\n    dispatch({ type: A.USER_LOGIN_REQUEST });\n    const config = { headers: { Content_Type: 'application/json' } };\n\n    const { data } = await axios.post(\n      '/api/users/login',\n      { email, password },\n      config\n    );\n\n    dispatch({ type: A.USER_LOGIN_SUCCESS, payload: data });\n\n    localStorage.setItem('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({\n      type: A.USER_LOGIN_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n\nexport const logout = () => (dispatch) => {\n  localStorage.removeItem('userinfo');\n  dispatch({ type: A.USER_LOGOUT });\n  dispatch({ type: A.USER_DETAILS_RESET });\n  dispatch({ type: O.ORDER_LIST_MY_RESET });\n  dispatch({ type: A.USER_LIST_RESET });\n};\n\nexport const register = (name, email, password) => async (dispatch) => {\n  try {\n    dispatch({ type: A.USER_REGISTER_REQUEST });\n    const config = { headers: { Content_Type: 'application/json' } };\n\n    const { data } = await axios.post(\n      '/api/users',\n      { name, email, password },\n      config\n    );\n\n    dispatch({ type: A.USER_REGISTER_SUCCESS, payload: data });\n    dispatch({ type: A.USER_LOGIN_SUCCESS, payload: data });\n\n    localStorage.setItem('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({\n      type: A.USER_REGISTER_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n\nexport const getUserDetails = (id) => async (dispatch, getState) => {\n  try {\n    dispatch({ type: A.USER_DETAILS_REQUEST });\n    const {\n      userLogin: { userInfo },\n    } = getState();\n\n    const config = {\n      headers: {\n        Content_Type: 'application/json',\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    };\n    const { data } = await axios.get(`/api/users/${id}`, config);\n\n    dispatch({ type: A.USER_DETAILS_SUCCESS, payload: data });\n\n    // localStorage.setItem('userInfo',JSON.stringify(data))\n  } catch (error) {\n    dispatch({\n      type: A.USER_REGISTER_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n\nexport const updateUserProfile = (user) => async (dispatch, getState) => {\n  try {\n    dispatch({ type: A.USER_UPDATE_PROFILE_REQUEST });\n    const {\n      userLogin: { userInfo },\n    } = getState();\n\n    const config = {\n      headers: {\n        Content_Type: 'application/json',\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    };\n    const { data } = await axios.put(`/api/users/profile`, user, config);\n\n    dispatch({ type: A.USER_UPDATE_PROFILE_SUCCESS, payload: data });\n\n    // localStorage.setItem('userInfo',JSON.stringify(data))\n  } catch (error) {\n    dispatch({\n      type: A.USER_REGISTER_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n\nexport const listUsers = () => async (dispatch, getState) => {\n  try {\n    dispatch({ type: A.USER_LIST_REQUEST });\n    const {\n      userLogin: { userInfo },\n    } = getState();\n\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    };\n    const { data } = await axios.get(`/api/users`, config);\n\n    dispatch({ type: A.USER_LIST_SUCCESS, payload: data });\n\n    // localStorage.setItem('userInfo',JSON.stringify(data))\n  } catch (error) {\n    dispatch({\n      type: A.USER_LIST_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n\n\nexport const deleteUser = (id) => async (dispatch, getState) => {\n  try {\n    dispatch({ type: A.USER_DELETE_REQUEST });\n    const {\n      userLogin: { userInfo },\n    } = getState();\n\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    };\n    await axios.delete(`/api/users/${id}`, config);\n\n    dispatch({ type: A.USER_DELETE_SUCCESS });\n\n    // localStorage.setItem('userInfo',JSON.stringify(data))\n  } catch (error) {\n    dispatch({\n      type: A.USER_DELETE_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n\n\nexport const updateUser = (user) => async (dispatch, getState) => {\n  try {\n    dispatch({ type: A.USER_UPDATE_REQUEST });\n    const {\n      userLogin: { userInfo },\n    } = getState();\n\n    const config = {\n      headers: {\n        Content_Type: 'application/json',\n        Authorization: `Bearer ${userInfo.token}`,\n      },\n    };\n  const {data}=  await axios.put(`/api/users/${user._id}`,user, config);\n\n    dispatch({ type: A.USER_UPDATE_SUCCESS });\n    dispatch({ type: A.USER_DETAILS_SUCCESS , payload:data});\n\n    // localStorage.setItem('userInfo',JSON.stringify(data))\n  } catch (error) {\n    dispatch({\n      type: A.USER_UPDATE_PROFILE_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};"]},"metadata":{},"sourceType":"module"}