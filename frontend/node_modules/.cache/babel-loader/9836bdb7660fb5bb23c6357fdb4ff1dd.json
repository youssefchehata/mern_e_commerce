{"ast":null,"code":"import _slicedToArray from\"/home/youssef/Documents/workSpace/mern_e_commerce/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{Form,Button,Row,Col,Table}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{Loader}from'../components/Loader';import{Message}from'../components/Message';import{getUserDetails,updateUserProfile}from'../store/actions/userActions';import{listMyOrders}from'../store/actions/orderActions';var Profile=function Profile(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var dispatch=useDispatch();var orderListMy=useSelector(function(state){return state.orderListMy;});var loadingOrders=orderListMy.loading,errorOrders=orderListMy.error,orders=orderListMy.orders;var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userUpdateProfile=useSelector(function(state){return state.userUpdateProfile;});var success=userUpdateProfile.success;useEffect(function(){if(!userInfo){history.push('/login');}else{if(!user.name){dispatch(getUserDetails('profile'));dispatch(listMyOrders());}else{setName(user.name);setEmail(user.email);}}},[dispatch,history,user]);var submitHandler=function submitHandler(e){e.preventDefault();if(password!==confirmPassword){setMessage('Password do not match');}else{dispatch(updateUserProfile({id:user._id,name:name,email:email,password:password}));}};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User profile\"}),message&&/*#__PURE__*/_jsx(Message,{children:message}),error&&/*#__PURE__*/_jsx(Message,{children:error}),success&&/*#__PURE__*/_jsx(Message,{children:\"Profile Updated\"}),loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"name \"}),/*#__PURE__*/_jsx(Form.Control,{type:name,placeholder:\"Enter name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:email,placeholder:\"Enter Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password \"}),/*#__PURE__*/_jsx(Form.Control,{type:password,placeholder:\"Enter password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"confirmPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"confirmPassword \"}),/*#__PURE__*/_jsx(Form.Control,{type:confirmPassword,placeholder:\"confirmPassword\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\"Update\"})]})]}),/*#__PURE__*/_jsxs(Col,{md:9,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Orders\"}),loadingOrders?/*#__PURE__*/_jsx(Loader,{}):errorOrders?/*#__PURE__*/_jsx(Message,{children:errorOrders}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DATE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"TOTAL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PAID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DELIVERED\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(function(el){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[el._id,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[el.createdAt.substring(0,10),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[el.totalPrice,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[el.isPaid?el.paidAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}}),' ']}),/*#__PURE__*/_jsxs(\"td\",{children:[el.isDelivered?el.DeliveredAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}}),' ']}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/order/\".concat(el._id),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:\"Details\"})}),\" \"]})]},el._id);})})]})]})]});};export default Profile;","map":{"version":3,"sources":["/home/youssef/Documents/workSpace/mern_e_commerce/frontend/src/screens/Profile.js"],"names":["React","useState","useEffect","Link","Form","Button","Row","Col","Table","useDispatch","useSelector","Loader","Message","getUserDetails","updateUserProfile","listMyOrders","Profile","history","email","setEmail","name","setName","password","setPassword","confirmPassword","setConfirmPassword","message","setMessage","dispatch","orderListMy","state","loadingOrders","loading","errorOrders","error","orders","userDetails","user","userLogin","userInfo","userUpdateProfile","success","push","submitHandler","e","preventDefault","id","_id","target","value","map","el","createdAt","substring","totalPrice","isPaid","paidAt","color","isDelivered","DeliveredAt"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Form, Button, Row, Col, Table } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Loader } from '../components/Loader';\nimport { Message } from '../components/Message';\nimport {\n  getUserDetails,\n  updateUserProfile,\n} from '../store/actions/userActions';\nimport { listMyOrders } from '../store/actions/orderActions';\n\nconst Profile = ({ history }) => {\n  const [email, setEmail] = useState('');\n  const [name, setName] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [message, setMessage] = useState('');\n\n  const dispatch = useDispatch();\n\n  const orderListMy = useSelector((state) => state.orderListMy);\n  const { loading: loadingOrders, error: errorOrders, orders } = orderListMy;\n\n  const userDetails = useSelector((state) => state.userDetails);\n  const { loading, error, user } = userDetails;\n\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  const userUpdateProfile = useSelector((state) => state.userUpdateProfile);\n  const { success } = userUpdateProfile;\n\n  useEffect(() => {\n    if (!userInfo) {\n      history.push('/login');\n    } else {\n      if (!user.name) {\n        dispatch(getUserDetails('profile'));\n        dispatch(listMyOrders());\n      } else {\n        setName(user.name);\n        setEmail(user.email);\n      }\n    }\n  }, [dispatch, history, user]);\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    if (password !== confirmPassword) {\n      setMessage('Password do not match');\n    } else {\n      dispatch(\n        updateUserProfile({\n          id: user._id,\n          name,\n          email,\n          password,\n        })\n      );\n    }\n  };\n\n  return (\n    <Row>\n      <Col md={3}>\n        <h2>User profile</h2>\n        {message && <Message>{message}</Message>}\n        {error && <Message>{error}</Message>}\n        {success && <Message>Profile Updated</Message>}\n        {loading && <Loader />}\n        <Form onSubmit={submitHandler}>\n          <Form.Group controlId='name'>\n            <Form.Label>name </Form.Label>\n            <Form.Control\n              type={name}\n              placeholder='Enter name'\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n\n          <Form.Group controlId='email'>\n            <Form.Label>Email Address</Form.Label>\n            <Form.Control\n              type={email}\n              placeholder='Enter Email'\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n\n          <Form.Group controlId='password'>\n            <Form.Label>Password </Form.Label>\n            <Form.Control\n              type={password}\n              placeholder='Enter password'\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n\n          <Form.Group controlId='confirmPassword'>\n            <Form.Label>confirmPassword </Form.Label>\n            <Form.Control\n              type={confirmPassword}\n              placeholder='confirmPassword'\n              value={confirmPassword}\n              onChange={(e) => setConfirmPassword(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n\n          <Button type='submit' variant='primary'>\n            Update\n          </Button>\n        </Form>\n      </Col>\n      <Col md={9}>\n        <h2>My Orders</h2>\n\n        {loadingOrders ? (\n          <Loader />\n        ) : errorOrders ? (\n          <Message>{errorOrders}</Message>\n        ) : (\n          <Table striped bordered hover responsive className='table-sm'>\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>DATE</th>\n                <th>TOTAL</th>\n                <th>PAID</th>\n                <th>DELIVERED</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n              {orders.map((el) => (\n                <tr key={el._id}>\n                  <td>{el._id} </td>\n                  <td>{el.createdAt.substring(0, 10)} </td>\n                  <td>{el.totalPrice} </td>\n                  <td>\n                    {el.isPaid ? (\n                      el.paidAt.substring(0, 10)\n                    ) : (\n                      <i className='fas fa-times' style={{ color: 'red' }}></i>\n                    )}{' '}\n                  </td>\n                  <td>\n                    {el.isDelivered ? (\n                      el.DeliveredAt.substring(0, 10)\n                    ) : (\n                      <i className='fas fa-times' style={{ color: 'red' }}></i>\n                    )}{' '}\n                  </td>\n                  <td><Link to={`/order/${el._id}`} >\n                      <Button variant='light' className='btn-sm' >Details</Button>\n                  </Link> </td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n        )}\n      </Col>\n    </Row>\n  );\n};\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}